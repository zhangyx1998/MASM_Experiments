; MASM REP/LOOP Difference Experiment
; By Yuxuan Zhang

DSEG SEGMENT
    VAR2 DB 01H
    VAR1 DW 01H
    ADDR DD 0
DSEG ENDS

CODE SEGMENT
    ASSUME CS:CODE, DS:DSEG, ES:DSEG
START:
    MOV AX, DSEG
    MOV DS, AX
    MOV ES, AX

    MOV ADDR, WORD PTR HELLO
    MOV ADDR[2], WORD PTR CODE2

    ; JMP CODE2:HELLO
    jmp far ADDR

EXIT:
    MOV  AH, 4CH
    MOV  AL, 0
    INT  21H
CODE ENDS
END START

CODE2 SEGMENT
HELLO:
    ; JMP CODE:EXIT
    MOV  AH, 4CH
    MOV  AL, 0
    INT  21H
CODE2 ENDS